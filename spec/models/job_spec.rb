require 'rails_helper'

RSpec.describe "Job" do
  let(:raw_job) {{"id"=>12480, "title"=>"Senior Software Engineer (Clojure / Golang / AWS) at uSwitch (London, UK)", "description"=>"<p><strong>Senior Software Engineer</strong></p><br /><p>Our Customer Engagement team is looking to grow to take on some really interesting, and technical, customer focused work. To do this we need a developer with a desire to cover front-to-back work: we do front end work seen by the customer; we build microservices in <strong>Clojure</strong> &amp; <strong>Go</strong>; we deploy &amp; monitor all of this using <strong>Docker </strong>and <strong>AWS ECS</strong>.&nbsp; You really will get exposure across our technology stack.</p><br /><p>The team is focused on improving the customer accounts experience: we care about the customer and we support the other uSwitch products; we balance delivering customer value against the technology used and we empower you to own those problems.&nbsp;</p><br /><p>We try to keep a startup feel to how we work: anyone can get involved in any aspect of the product and, sometimes, you might have to.&nbsp; Expect to not only bring your knowledge and understanding but also to be pushed to grow and expand your experiences.</p><br /><p><strong>Technologies, we use:</strong>&nbsp;</p><br /><ul><br /><li>Languages: <strong>Clojure</strong>, <strong>Go</strong>, Ruby, HTML, CSS, <strong>JavaScript</strong></li><br /><li>Services: SQS, <strong>Kinesis</strong></li><br /><li>Analytics: <strong>BigQuery</strong>, R, Google Analytics</li><br /><li>Infrastructure:<strong> AWS</strong>, Docker, <strong>Terraform</strong></li><br /></ul><br /><p><strong>GitHub: https://github.com/uswitch</strong></p><br /><p><strong><strong>Our culture</strong></strong></p><br /><p>We empower people to make intelligent decisions. We give them the autonomy to experiment and develop innovative ways to deliver a better product.</p><br /><p>uSwitch uses a micro-service architecture to help the company and the systems we build be as scalable as possible; teams operate and deploy independently, making as many updates and changes they want to throughout the day.</p><br /><p><strong>A World Class Team</strong>&nbsp;</p><br /><p>We work in small autonomous product teams with everyone needed across disciplines to help solve problems and deliver. The organisation helps set direction but how you get there is up to you and your team. We share our ideas internally and externally through hosting meet-ups, working on open-source and presenting at conferences.</p><br /><p><strong>Ownership</strong>&nbsp;</p><br /><p>We expect you to own your problem. If that is delivering a web product then you must understand traffic acquisition, user experience, monitoring, technology, user journey and, importantly, the problem we are trying to solve for the customer. Although the majority of our APIs are written in Clojure and our front end apps tend to be Ruby our philosophy is to use the right tool for the job. We employ polyglot engineers with an interest in experimenting with new technology; if you feel a different language or tool is more appropriate for the problem at hand (and you can bring your team with you) you will have the space to incorporate it - even it if means rewriting existing systems.</p><br /><p><strong>Conferences / Public Speaking / Hack days / Community events</strong>&nbsp;</p><br /><p>We support many conferences around the globe particularly in the Clojure world and help with both your attendance and speaking engagements (within limits).&nbsp; You can also see us at <strong>Clojure Dojos</strong>, we hosted the first couple of clojurebridge events in the UK, have hosted <strong>codebar </strong>and <strong>DataKind</strong>.</p>", "url"=>"http://stackoverflow.com/jobs/131248/senior-software-engineer-clojure-golang-aws-uswitch", "location"=>"London, UK", "posted_date"=>"2016-12-20", "remote"=>false, "company"=>{"id"=>2507, "name"=>"uSwitch"}, "technologies"=>[{"id"=>1, "name"=>"Ruby"}, {"id"=>2, "name"=>"JavaScript"}, {"id"=>3, "name"=>"Go"}, {"id"=>6, "name"=>"Clojure"}]}}

  it "should have data" do
    job = Job.new(raw_job)
    expect(job.uid).to eq(12480)
    expect(job.title).to eq('Senior Software Engineer (Clojure / Golang / AWS) at uSwitch (London, UK)')
    expect(job.description).to include('Our Customer Engagement team is looking to grow to take on some really interesting, and technical, customer focused work.')
    expect(job.url).to eq('http://stackoverflow.com/jobs/131248/senior-software-engineer-clojure-golang-aws-uswitch')
    expect(job.location).to eq('London, UK')
    expect(job.posted_date).to eq('2016-12-20')
    expect(job.remote).to eq(false)
    expect(job.company_name).to eq('uSwitch')
    expect(job.technologies).to eq('Ruby, JavaScript, Go, Clojure')
  end
end
